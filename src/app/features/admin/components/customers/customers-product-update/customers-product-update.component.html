<div class="container mt-4" [formGroup]="productsForm">
  <h3>ุชุนุฏูู ุจูุงูุงุช ุงูุนููู</h3>

  <div class="card p-3 mb-4">
    <h5>ุจูุงูุงุช ุงูุนููู</h5>

    <div class="row">
      <div class="col-md-6 mb-3">
        <label>ุงูุงุณู ุงูุฃูู</label>
        <input formControlName="firstName" class="form-control" />
      </div>

      <div class="col-md-6 mb-3">
        <label>ุงูุงุณู ุงูุซุงูู</label>
        <input formControlName="lastName" class="form-control" />
      </div>

      <div class="col-md-6 mb-3">
        <label>ุงูุงูููู</label>
        <input formControlName="email" type="email" class="form-control" />
      </div>

      <div class="col-md-6 mb-3">
        <label>ุงููุงุชู</label>
        <input formControlName="phone" class="form-control" />
      </div>

      <div class="col-md-6 mb-3">
        <label>ุงููุฏููุฉ</label>
        <input formControlName="city" class="form-control" />
      </div>

      <div class="col-md-6 mb-3">
        <label>ุงูุจูุฏ</label>
        <input formControlName="country" class="form-control" />
      </div>

      <div class="col-md-6 mb-3">
        <label>ุทุฑููุฉ ุงูุฏูุน</label>
        <select
          class="form-select"
          formControlName="paymentMethod"
          (change)="toggleVisa()"
        >
          <option value="cash">ูุงุด</option>
          <option value="visa">ููุฒุง</option>
        </select>
      </div>

      <div class="col-12 row" *ngIf="showVisa">
        <div class="col-md-4 mb-3">
          <label>ุฑูู ุงูุจุทุงูุฉ</label>
          <input formControlName="cardNumber" class="form-control" />
        </div>
        <div class="col-md-4 mb-3">
          <label>CVV</label>
          <input formControlName="cvv" class="form-control" />
        </div>
        <div class="col-md-4 mb-3">
          <label>ุชุงุฑูุฎ ุงูุงูุชูุงุก</label>
          <input
            type="month"
            formControlName="expireDate"
            class="form-control"
          />
        </div>
      </div>
    </div>
  </div>

  <h5 class="mb-3">ุงูููุชุฌุงุช</h5>

  <div formArrayName="items">
    <div
      *ngFor="let item of itemsArray.controls; let i = index"
      [formGroupName]="i"
      class="card p-3 mb-3"
    >
      <div class="row">
        <div class="col-md-4">
          <img [src]="item.value.image" class="car-img mb-2" />
          <input formControlName="image" class="form-control" />
        </div>

        <div class="col-md-8">
          <label>ุงุณู ุงูููุชุฌ</label>
          <input formControlName="name" class="form-control mb-3" />

          <label>ุงููุตู</label>
          <textarea
            formControlName="description"
            rows="2"
            class="form-control mb-3"
          ></textarea>

          <div class="row">
            <div class="col-6">
              <label>ุงูุณุนุฑ</label>
              <input
                type="number"
                formControlName="price"
                class="form-control"
              />
            </div>

            <div class="col-6">
              <label>ุงูุฎุตู</label>
              <div class="input-group">
                <input
                  type="number"
                  formControlName="discount"
                  class="form-control"
                />
                <button
                  type="button"
                  class="btn btn-danger"
                  (click)="removeDiscount(i)"
                >
                  ุญุฐู
                </button>
              </div>
            </div>
          </div>

          <label class="mt-3">ุงููููุฉ</label>
          <div class="input-group">
            <button
              type="button"
              class="btn btn-outline-secondary"
              (click)="decreaseQty(i)"
            >
              -
            </button>
            <input
              type="number"
              formControlName="quntity"
              class="form-control text-center"
            />
            <button
              type="button"
              class="btn btn-outline-secondary"
              (click)="increaseQty(i)"
            >
              +
            </button>
          </div>

          <label class="mt-3">ุงูุฅุฌูุงูู</label>
          <input
            type="number"
            formControlName="total"
            readonly
            class="form-control"
          />

          <button
            class="btn btn-outline-danger mt-3"
            type="button"
            (click)="removeItem(i)"
          >
            ๐ ุญุฐู ุงูููุชุฌ
          </button>
        </div>
      </div>
    </div>
  </div>

  <button class="btn btn-success w-100" (click)="saveUpdate()">
    ุญูุธ ูู ุงูุชุนุฏููุงุช
  </button>
</div>
